# Протокол «Проверки и решения проблем»

## Назначение
Унифицированный порядок действий перед устранением любой ошибки, проблемной функции или деградации системы. Обеспечивает полноту анализа, фиксацию решений в `memory-bank/` и контроль повторных попыток.

## Когда применять
- Перед изменениями, направленными на исправление багов, нестабильности или неработоспособности любого компонента.
- Перед ретестами и повторными попытками решения той же проблемы.
- При выявлении противоречий в существующих памятках или документации.

## Последовательность
0. **Повторная попытка?** Если задача уже предпринималась ранее:
   - Ответь на вопросы: «Сработали ли предыдущие решения так, как ожидалось?» и «Решилась ли системная проблема?». Зафиксируй вывод в актуальной памятке.
   - При отрицательном ответе уточни, что именно не сработало, и продолжай с шага 1.
1. **Системный обзор.** Просмотри связанные модули, тесты и конфигурации, чтобы увидеть общую картину и зависимые элементы. Сверься с `RoadMap.md`, `memory-bank/` и актуальными задачами.
2. **Создай/обнови памятку анализа.** В каталоге `memory-bank/issues/` заведи файл `problem-YYYY-MM-DD-<кратко>.md` (или обнови существующий), используя шаблон ниже. Обязательно зафиксируй:
   - Формулировку проблемы, которую решаешь.
   - Наблюдаемые технические причины или гипотезы.
   - План решения, включая проверку, что изменения не вызывают новых системных проблем и согласуются с архитектурой.
   - Перечень необходимых проверок и ожидаемых артефактов.
3. **Проверка рисков.** Сопоставь план с инвариантами из `RoadMap.md` и памяток. Убедись, что решения не нарушают FROZEN-зоны, порядок портов и существующие интеграции.
4. **Ревизия памяток.** Просмотри связанные файлы `memory-bank/` на предмет устаревших или противоречивых сведений. Если обнаружена путаница, выясни актуальную истину, обнови документы и зафиксируй вывод в памятке анализа.
5. **Пометка сомнений.** Если истину установить не удалось:
   - Добавь в начало соответствующего файла маркер `⚠️ СОМНИТЕЛЬНО:` с описанием непрояснённого вопроса и ссылкой на памятку анализа.
   - Укажи, какую информацию необходимо уточнить при следующем обращении.
6. **Перед исправлением.** Убедись, что памятка анализа содержит актуальный план, перечень рисков и проверок. Только после этого приступай к изменениям в коде.
7. **После выполнения задачи.** Вернись в памятку анализа, обнови статус решения, перечисли фактические проверки и сделай вывод о закрытии проблемы. Если задача остаётся открытой, отметь, какие шаги необходимо повторить.

## Шаблон памятки анализа
```
# Problem YYYY-MM-DD — <краткое название>

## Проблема
<описание>

## Технические причины / гипотезы
- ...

## План решения
- ...
- Проверка согласованности: <что проверяем, чтобы не сломать систему>

## Проверки
- [ ] Команда / тест
- [ ] ...

## Повторные попытки
- Дата / вывод: <сработало? решило проблему?>

## Итоги
- <что сделано, результат>
- Статус: открыто | решено | требует уточнения
```

## Актуальность памяток (проверка 2025-11-08)
- `memory-bank/README.md`, `verification-protocol.md`, `active-stack-checks.md`, `module-isolation-audit.md`, `follow-roadmap.md` — просмотрены, противоречий с протоколом устранения проблем не обнаружено.
- Открытых конфликтов или сомнительных инструкций нет; при появлении новых сведений используем маркеры `⚠️ СОМНИТЕЛЬНО` по шагу 5.

## Поддержание протокола
- При каждом обращении к «Быстрому протоколу» RoadMap этот документ обязателен к чтению и исполнению, если задача связана с устранением проблем.
- Обновляй файл при изменении структуры `memory-bank/` или добавлении новых требований к анализу.
