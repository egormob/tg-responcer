# Задача: повторная проверка `/admin/selftest` против no-op AI

> **Статус:** закрыто 2025-11-01 — обновлён шаг [RoadMap М7.Ш4](../../RoadMap.md#майлстоун-7-export-csv-feature) со статусом «✅», лог проверки сохранён в [logs/check-roadmap.log](../../logs/check-roadmap.log).

> **Обновление 2025-11-09:** выполнен повторный self-test `q=utm` с успешными ответами `200` и `utmDegraded = false`; результаты и JSON сохранены в [memory-bank/tests/2025-11-09-utm-selftest.md](../tests/2025-11-09-utm-selftest.md). RoadMap обновлён пометкой о прохождении шага.

## Контекст
Шаг М7.Ш4 вновь открыт, потому что требуются подтверждения, что self-test корректно обрабатывает сценарий с заглушками AI (`adapters-noop`). Необходимо гарантировать, что отчёт фиксирует ошибки и предупреждения при отключённом реальном API.

## Требования
1. Настроить окружение с no-op реализацией AI (без обращения к OpenAI).
2. Прогнать `/admin/selftest` и убедиться, что отчёт корректно сигнализирует о недоступности внешнего API, не падает по необработанным исключениям.
3. Обновить журнал прогресса и RoadMap по итогам проверки.
4. После успешного деплоя вернуть статус шага М7.Ш4 в `RoadMap.md` на «✅» с упоминанием коммита и обновить журнал.

> Guardrail: синхронизируй проверки с [правилами рассылки](../../RoadMap.md#майлстоун-8-broadcast-feature) и [регрессионным чек-листом](../active-stack-checks.md#регрессионные-проверки-broadcast), чтобы self-test не нарушил мгновенный `/broadcast` и обязательный фидбэк по rate limit.

## Артефакты
- Логи запуска self-test.
- Описание окружения и конфигурации no-op AI.
- Ссылка на коммит/PR, подтверждающий выполнение проверки.
