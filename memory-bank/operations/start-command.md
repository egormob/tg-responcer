# –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–º—è—Ç–∫–∞: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π /start

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–í –Ω–æ—è–±—Ä–µ 2025 –≥–æ–¥–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω UX-–¥–µ—Ñ–µ–∫—Ç: –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (`/start`) –±–æ—Ç –æ–±—Ä–∞—â–∞–ª—Å—è –∫ OpenAI Responses –∏ –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª fallback ¬´‚ö†Ô∏è ‚Üí üîÅüí¨¬ª. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–µ–ª–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –æ—Ç–¥–µ–ª—ë–Ω–Ω—É—é –æ—Ç AI.

## –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
1. **/start —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ OpenAI.** –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –ø–∞—Ä—Å–∏–Ω–≥ payload/UTM, `StoragePort.saveUser` (—Å –∑–∞–ø–∏—Å—å—é –≤ D1), –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `knownUsersCache`, —Å–∏—Å—Ç–µ–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥. AI-–æ—á–µ—Ä–µ–¥—å –∏ `OpenAI Responses` –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.
2. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ.**
   - –ï—Å–ª–∏ `first_name` –∏–∑–≤–µ—Å—Ç–µ–Ω, –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç ¬´–ü—Ä–∏–≤–µ—Ç, <–ò–º—è>!¬ª.  
   - –ï—Å–ª–∏ –∏–º—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è ¬´–ü—Ä–∏–≤–µ—Ç!¬ª.  
   –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏ –∏–ª–∏ –ø—Ä–æ–º–ø—Ç–æ–≤.
3. **AI –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è.** –¢–µ–∫—Å—Ç –±–µ–∑ `/` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Responses, –∫–æ–º–∞–Ω–¥—ã `/xxx` –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–ª–æ–π.

## –ü—Ä–æ–≤–µ—Ä–∫–∏
- **Telegram UX:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ–≥–æ–Ω `/start src_TEST-GREETING` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–æ–≤–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –±–µ–∑ fallback-—Å–∏–º–≤–æ–ª–æ–≤; —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç AI-–∞–¥–∞–ø—Ç–µ—Ä (–ª–æ–≥–∏ `[ai][request]` ‚Üí `[ai][ok]`).
- **Cloudflare tail:** —Ñ–∞–π–ª `logs/start-greeting-tail.json` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `[ai][request]`/`[ai][timeout]` –≤–æ –≤—Ä–µ–º—è `/start`, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —à—Ç–∞—Ç–Ω—ã–π `utm-tracking` –∏ `sendText status=200`.
- **UTM workflow:** payload —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `users.utm_source`, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π `ping` –±–µ–∑ payload –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç `saveUser`, `knownUsersCache` —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫.

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ
1. –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî —Ç–æ—á–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏. UX –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç OpenAI.  
2. –î–∞–∂–µ –ø—Ä–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ AI —Å—Ç–∞—Ä—Ç –æ—Å—Ç–∞—ë—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é UTM.  
3. UTM-—Ç—Ä–µ–∫–∏–Ω–≥ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ –∑–∞–ø—É—Å–∫–∞ AI: —Å—Ç–∞—Ä—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## –ü—Ä–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
1. –°–Ω–∏–º–∞–π `wrangler tail` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `route=telegram.start`.  
2. –ü—Ä–æ–≤–µ—Ä—è–π, –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ `[ai][request]` –∏–ª–∏ `safe fallback` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `/start`.  
3. –°—Ä–∞–≤–Ω–∏–≤–∞–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å `logs/start-greeting-tail.json`; –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–≤–∞–π issue –∏ —Å—Å—ã–ª–∫—É –Ω–∞ —ç—Ç—É –ø–∞–º—è—Ç–∫—É.
