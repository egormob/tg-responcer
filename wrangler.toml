name = "tg-responcer"
main = "apps/worker-main/index.ts"
compatibility_date = "2025-10-26"

[[d1_databases]]
binding = "DB"
database_id = "7669db41-69ee-4c29-995a-418d71cd81c0"
migrations_dir = "apps/worker-main/migrations"

[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "d03442f14f7e4a64bb1d7896244a0d3f"

[[kv_namespaces]]
binding = "AI_CONTROL_KV"
id = "26fef8228c074edaaf20d3b1b8d42811"


[[kv_namespaces]]
binding = "ADMIN_EXPORT_LOG"
id = "3da8d75b18b548ceb528fac891f6bb24"

[[kv_namespaces]]
binding = "ADMIN_TG_IDS"
id = "6e0669bae62c48d5a8d64d11602e9d6d"

[[kv_namespaces]]
binding = "BROADCAST_PENDING_KV"
id = "ec8ca40dbcca469fa73fe6f3850ef596"

[vars]
# Wrangler keeps plaintext variables defined here in sync on every deploy. Sensitive
# values are managed as secrets (see `scripts/bootstrap-cloudflare-secrets.sh`). D1 и KV
# уже привязаны через блоки [[d1_databases]]/[[kv_namespaces]] выше.
CONFIG_REQUIRED_SECRETS = "OPENAI_API_KEY,OPENAI_MODEL,OPENAI_PROMPT_ID,OPENAI_PROMPT_VARIABLES,TELEGRAM_BOT_TOKEN,TELEGRAM_WEBHOOK_SECRET,ADMIN_TOKEN"
STRESS_TEST_ENABLED = "0"
